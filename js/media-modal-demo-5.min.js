var mediaUploaderDemo=mediaUploaderDemo||{};(function(a){mediaUploaderDemo={frame:function(){if(this._frame){return this._frame;}mediaUploaderDemo.views={};
mediaUploaderDemo.controller={};mediaUploaderDemo.controller.HelloWorld=wp.media.controller.State.extend({defaults:{id:"hello-world-state",menu:"default",content:"hello_world_state"}});
mediaUploaderDemo.views.HelloWorld=wp.media.View.extend({className:"hello-world-frame",template:wp.media.template("hello-world")});var b=[new wp.media.controller.Library(),new wp.media.controller.Library({id:"image",title:"Images",priority:20,searchable:false,library:wp.media.query({type:"image"}),multiple:true}),new wp.media.controller.Library({id:"audio",title:"Audio",priority:30,filterable:"uploaded",library:wp.media.query({type:"audio"}),multiple:false}),new wp.media.controller.Library({id:"video",title:"Video",priority:40,library:wp.media.query({type:"video"}),multiple:false,contentUserSetting:false}),new mediaUploaderDemo.controller.HelloWorld({title:"Hello World",id:"hello-world-state",priority:50})];
this._frame=wp.media({className:"media-frame no-sidebar",states:b});this._frame.on("content:create:hello_world_state",function(){var c=new mediaUploaderDemo.views.HelloWorld({controller:mediaUploaderDemo.frame(),model:mediaUploaderDemo.frame().state()});
mediaUploaderDemo.frame().content.set(c);});this._frame.on("open",this.open);this._frame.on("ready",this.ready);this._frame.on("close",this.close);this._frame.on("menu:render:default",this.menuRender);
this._frame.state("library").on("select",this.select);this._frame.state("image").on("select",this.select);return this._frame;},open:function(){a(".media-modal").addClass("smaller");
},ready:function(){console.log("Frame ready");},close:function(){a(".media-modal").removeClass("smaller");},menuRender:function(b){},select:function(){var c=wp.media.view.settings,b=this.get("selection");
a(".added").remove();b.map(mediaUploaderDemo.showAttachmentDetails);},showAttachmentDetails:function(e){var c=a("#attachment-details-tmpl"),b=c.clone();
b.addClass("added");a("input",b).each(function(){var f=a(this).attr("id").replace("attachment-","");a(this).val(e.get(f));});b.attr("id","attachment-details-"+e.get("id"));
var d=e.get("sizes");a("img",b).attr("src",d.thumbnail.url);a("textarea",b).val(JSON.stringify(e,null,2));c.after(b);},init:function(){a("#open-media-modal").on("click",function(b){b.preventDefault();
mediaUploaderDemo.frame().open();});}};a(mediaUploaderDemo.init);})(jQuery);